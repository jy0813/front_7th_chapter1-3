# 과제 3 - E2E 테스트 및 시각적 회귀 테스트

## 목차

1. [기본과제](#기본과제)
2. [심화과제](#심화과제)
3. [제출 가이드](#제출-가이드)

---

## 기본과제

### 학습 목표

이 과제를 통해 다음을 경험하고 이해합니다:

1. **Storybook + Chromatic을 활용한 시각적 회귀 테스트**
2. **Playwright를 활용한 E2E 테스트**

새로운 테스트 방식을 경험하고, 각 테스트 방식의 **장점과 단점**을 파악하는 것이 핵심입니다.

---

### 기능 개발 요구사항

#### 1. 드래그 앤 드롭(D&D) 기능

- 캘린더의 일정을 마우스로 끌어 다른 날짜로 옮기는 기능 구현
- 드래그 중 시각적 피드백 제공
- 드롭 시 일정 날짜 변경

#### 2. 날짜 클릭으로 일정 생성 기능

- 캘린더의 비어있는 날짜 셀 클릭 시
- 해당 날짜가 자동으로 일정 생성 폼에 채워짐

---

### E2E 테스트 작성 (필수)

**주의**: "전반"이란 Create, Read, Update, Delete 모두를 의미합니다.

#### 필수 테스트 시나리오

1. **기본 일정 관리 워크플로우 전반 검증**

   - 일정 생성 (Create)
   - 일정 조회 (Read)
   - 일정 수정 (Update)
   - 일정 삭제 (Delete)

2. **반복 일정 관리 워크플로우 전반 검증**

   - 반복 일정 생성
   - 반복 일정 조회
   - 반복 일정 수정 (단일/시리즈)
   - 반복 일정 삭제 (단일/시리즈)

3. **일정 겹침 처리 방식 검증**

   - 동일 시간대 일정 생성 시도
   - 겹침 감지 및 경고 표시
   - 겹침 허용/차단 동작

4. **알림 시스템 노출 조건 검증**

   - 알림 시간 도래 시 노출
   - 알림 표시 조건 확인
   - 알림 상호작용 (확인/무시)

5. **검색 및 필터링 전반 검증**
   - 제목/설명 검색
   - 카테고리별 필터링
   - 날짜 범위 필터링
   - 검색 결과 표시

#### E2E 테스트 평가 기준

- [ ] 테스트 시나리오가 실제 사용자 워크플로우를 반영하는가?
- [ ] 테스트 간 의존성이 없도록 독립적으로 설계되었는가?
- [ ] 모든 필수 명세에 대한 E2E 테스트를 작성했는가?
- [ ] 테스트가 읽기 쉽고 유지보수하기 좋게 작성되었는가?
- [ ] 테스트 데이터 정리 및 격리가 잘 되어있는가?
- [ ] CI/CD 파이프라인에 적절하게 통합했는가?

---

### 시각적 회귀 테스트 작성 (필수)

#### 필수 테스트 시나리오

1. **타입에 따른 캘린더 뷰 렌더링**

   - 월간 뷰
   - 주간 뷰
   - 일간 뷰

2. **일정 상태별 시각적 표현**

   - 완료 상태
   - 진행 중 상태
   - 예정 상태
   - 지난 일정 상태

3. **다이얼로그 및 모달**

   - 일정 생성 다이얼로그
   - 일정 수정 다이얼로그
   - 반복 일정 설정 모달
   - 삭제 확인 다이얼로그

4. **폼 컨트롤 상태**

   - 입력 필드 포커스 상태
   - 에러 상태 표시
   - 비활성화 상태
   - 검증 성공/실패 상태

5. **각 셀 텍스트 길이에 따른 처리**
   - 짧은 제목
   - 긴 제목 (말줄임 처리)
   - 여러 줄 설명
   - 빈 상태

#### 시각적 회귀 테스트 평가 기준

- [ ] 시나리오에 적합한 컴포넌트들의 Storybook 구성을 올바르게 했는가?
- [ ] Chromatic에 연계해 적절한 Workflow를 구성했는가?
- [ ] CI/CD 파이프라인에 적절하게 통합했는가?

---

### 개발 진행 시 주의사항

#### ✅ DO

- **점진적 개발**: 한 번에 모든 기능을 개발하지 말 것
- **명확한 커밋**: 각 기능별로 의미 있는 커밋 메시지 작성
- **AI 활용**: AI 도구를 적극 활용하되, 결과물은 반드시 직접 검토
- **기존 테스트 유지**: 기존 테스트가 깨지지 않도록 유지
- **선택적 테스트 추가**: 필요하다고 판단되는 테스트 자유롭게 추가

#### ❌ DON'T

- **불필요한 테스트 삭제 금지**: 정말 불필요한 경우가 아니면 테스트 케이스 삭제 최소화
- **과도한 리팩토링 지양**: 당장은 적절한 스토리 작성에 집중
  - 컴포넌트 분리, 추상화, 응집도/결합도 개선은 이후 주차에 집중

---

## 심화과제

### 학습 목표

1. **각 테스트 종류의 장단점 파악**

   - 단위 테스트 (Unit Test)
   - 통합 테스트 (Integration Test)
   - E2E 테스트
   - 시각적 회귀 테스트

2. **적절한 테스트 전략 수립**
   - 프로젝트 특성 파악
   - 요구사항 중요도 고려
   - 효율적이고 지속 가능한 테스트 전략 설계

---

### (1) 테스트 전략 수립

#### 핵심 원칙

> **가장 중요한 것은 코드와 프로젝트의 신뢰성을 높이는 것입니다.**

- 적합하지 않은 테스트를 무리하게 적용하지 말 것
- 각 테스트의 장점과 한계를 명확히 이해
- 가장 효율적이고 장기적으로 운영 가능한 방식으로 설계

#### 프로젝트 특성별 테스트 전략

**UI Kit / 공통 컴포넌트 프로젝트**:

- **단위 테스트 중심**: 각 컴포넌트의 기능이 올바르게 동작하는지 확인
- 통합 테스트나 복잡한 E2E 테스트는 최소화

**서비스 앱 프로젝트**:

- **통합 테스트 중심**: 비즈니스 로직 검증
- 단위 테스트보다 통합 테스트가 효율적
- E2E 테스트로 핵심 사용자 시나리오 검증

#### 테스트 전략 수립 프로세스

1. **현재 테스트 상태 분석**

   - 단위 테스트 커버리지 확인
   - 통합 테스트 현황 파악
   - 테스트 부족 영역 식별

2. **테스트 보강 계획**

   - 단위/통합 테스트가 부족한가? → 보강
   - E2E 테스트로 신뢰도를 높일 수 있는가? → 추가
   - 시각적 회귀 테스트가 필요한가? → 고려

3. **효과적인 검증 범주 결정**
   - 대상을 어떤 범주에서 검증하는 것이 효과적인지 고민
   - 테스트 비용 대비 효과 분석

---

### (2) 과제 진행 방법

#### 1단계: 개별 전략 수립

- 팀원 모두 각자 이 프로젝트에 필요한 테스트 전략 작성

#### 2단계: 전략 공유 및 합의

- 정해진 시간에 모여 각자의 테스트 전략 공유
- 토론을 통해 모두가 공감할 수 있는 테스트 전략 작성
- **PR 본문에 해당 결과에 도달하게 된 이유 작성 필수**

#### 3단계: 테스트 코드 작성

**방법 A - 페어 코딩**:

- 팀원들이 함께 페어 코딩으로 테스트 작성
- PR에 페어 코딩으로 작성했다고 명시
- 작업자의 PR을 심화 과제 제출 링크로 사용 가능

**방법 B - 개별 작성**:

- 합의한 테스트 전략에 맞춰 각자 다른 스타일로 작성
- **중요**: 합의한 테스트 전략을 따를 것
- 토론은 필수

---

### 심화과제 평가 기준

- [ ] 각 요구사항에 대해 적절한 테스트 유형(단위, 통합, E2E 등)을 선택했는가?
- [ ] 테스트 전략이 프로젝트 특성과 요구사항 중요도를 고려하여 수립되었는가?
  - **그 이유가 구체적인가?**
- [ ] 선택한 테스트 전략이 효율적이고 실행 가능한가?
- [ ] **최소 5개 이상의 추가 테스트가 작성되었는가?**
  - 최소 개수는 학습의 의미가 없음
  - 가능한 한 유의미한 테스트를 많이 작성할 것

---

## 제출 가이드

### PR 작성 시 포함할 내용

1. **AI 활용 히스토리**

   - 핵심 챗 히스토리 공유
   - [참고 예시](https://github.com/jhlee0409/claude-code-history-viewer/blob/main/README.ko.md)

2. **AI 에이전트 활용 내용**

   - 각 작업을 순탄하게 하기 위해 지침한 부분
   - 코드 결과를 직접 확인하고 개선한 부분
   - 더 나은 결과를 만들기 위해 노력한 점

3. **테스트 전략 (심화과제)**
   - 수립한 테스트 전략
   - 해당 전략에 도달한 이유
   - 팀 토론 내용 요약

### 커밋 메시지 예시

```
feat: 드래그 앤 드롭 기능 구현

- 일정 카드에 드래그 이벤트 핸들러 추가
- 드롭 가능 영역 시각적 피드백 구현
- 드롭 시 일정 날짜 업데이트 API 연동

test: 드래그 앤 드롭 E2E 테스트 작성

- 일정 드래그 시작/종료 시나리오
- 유효한 날짜로 드롭 검증
- 무효한 영역으로 드롭 시 되돌리기 검증
```

### 주의사항

- 기존 테스트가 깨지지 않도록 유지
- 테스트 분리나 작성법 수정은 가능
- 불필요한 테스트 삭제는 최소화
- 명확한 커밋 히스토리 유지
- AI 활용 흔적 반드시 남기기

---

## 참고 자료

- `CLAUDE.md`: 프로젝트 구조 및 개발 가이드
- `AGENT.md`: TDD 에이전트 시스템 가이드
- `.claude/docs/`: TDD 철학 및 RTL 규칙
- `README.md`: 프로젝트 과제 명세
